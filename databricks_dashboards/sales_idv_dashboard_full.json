{
  "display_name": "Sales - IDV Results Dashboard",
  "warehouse_id": "9b7a58ad33c27fbc",
  "parent_path": "/Users/dane@snappt.com/dashboards",
  "serialized_dashboard": "{\"datasets\":[{\"name\":\"executive_summary\",\"displayName\":\"Executive Summary Metrics\",\"queryLines\":[\"SELECT\",\"    COUNT(*) AS total_idv_scans,\",\"    COUNT(DISTINCT property_id) AS active_properties,\",\"    COUNT(DISTINCT company_id) AS active_companies,\",\"    SUM(CASE WHEN status = 'PASS' THEN 1 ELSE 0 END) AS passed_scans,\",\"    SUM(CASE WHEN status = 'FAIL' THEN 1 ELSE 0 END) AS failed_scans,\",\"    SUM(CASE WHEN status = 'NEEDS REVIEW' THEN 1 ELSE 0 END) AS needs_review_scans,\",\"    ROUND(SUM(CASE WHEN status = 'PASS' THEN 1 ELSE 0 END) * 100.0 / COUNT(*), 2) AS pass_rate_percentage\",\"FROM rds.pg_rds_public.id_verifications\",\"WHERE results_provided_at IS NOT NULL\",\"    AND inserted_at BETWEEN :date_range.min AND :date_range.max\"],\"parameters\":[{\"displayName\":\"Date Range\",\"keyword\":\"date_range\",\"dataType\":\"DATE\",\"complexType\":\"RANGE\",\"defaultSelection\":{\"range\":{\"dataType\":\"DATE\",\"min\":{\"dynamicDateValue\":\"TODAY - 30\"},\"max\":{\"dynamicDateValue\":\"TODAY\"}}}}]},{\"name\":\"company_overview\",\"displayName\":\"Company Performance Overview\",\"queryLines\":[\"SELECT\",\"    c.name AS company_name,\",\"    c.short_id AS company_id,\",\"    COUNT(DISTINCT p.id) AS num_properties,\",\"    COUNT(DISTINCT iv.id) AS total_scans,\",\"    SUM(CASE WHEN iv.status = 'PASS' THEN 1 ELSE 0 END) AS passed,\",\"    SUM(CASE WHEN iv.status = 'FAIL' THEN 1 ELSE 0 END) AS failed,\",\"    ROUND(SUM(CASE WHEN iv.status = 'PASS' THEN 1 ELSE 0 END) * 100.0 / COUNT(iv.id), 1) AS pass_rate,\",\"    MAX(iv.inserted_at) AS most_recent_scan_date\",\"FROM rds.pg_rds_public.companies c\",\"JOIN rds.pg_rds_public.properties p ON c.id = p.company_id\",\"JOIN rds.pg_rds_public.id_verifications iv ON p.id = iv.property_id\",\"WHERE iv.results_provided_at IS NOT NULL\",\"    AND iv.inserted_at BETWEEN :date_range.min AND :date_range.max\",\"    AND p.identity_verification_enabled = TRUE\",\"GROUP BY c.name, c.short_id\",\"ORDER BY total_scans DESC\"],\"parameters\":[{\"displayName\":\"Date Range\",\"keyword\":\"date_range\",\"dataType\":\"DATE\",\"complexType\":\"RANGE\",\"defaultSelection\":{\"range\":{\"dataType\":\"DATE\",\"min\":{\"dynamicDateValue\":\"TODAY - 30\"},\"max\":{\"dynamicDateValue\":\"TODAY\"}}}}]},{\"name\":\"property_performance\",\"displayName\":\"Property-Level Performance\",\"queryLines\":[\"SELECT\",\"    p.name AS property_name,\",\"    c.name AS company_name,\",\"    p.state AS property_state,\",\"    p.city AS property_city,\",\"    COUNT(iv.id) AS total_scans,\",\"    SUM(CASE WHEN iv.status = 'PASS' THEN 1 ELSE 0 END) AS passed,\",\"    SUM(CASE WHEN iv.status = 'FAIL' THEN 1 ELSE 0 END) AS failed,\",\"    ROUND(SUM(CASE WHEN iv.status = 'PASS' THEN 1 ELSE 0 END) * 100.0 / COUNT(iv.id), 1) AS pass_rate,\",\"    DATEDIFF(CURRENT_DATE, MAX(iv.inserted_at)) AS days_since_last_scan\",\"FROM rds.pg_rds_public.properties p\",\"JOIN rds.pg_rds_public.companies c ON p.company_id = c.id\",\"JOIN rds.pg_rds_public.id_verifications iv ON p.id = iv.property_id\",\"WHERE iv.results_provided_at IS NOT NULL\",\"    AND iv.inserted_at BETWEEN :date_range.min AND :date_range.max\",\"GROUP BY p.name, c.name, p.state, p.city\",\"ORDER BY total_scans DESC\"],\"parameters\":[{\"displayName\":\"Date Range\",\"keyword\":\"date_range\",\"dataType\":\"DATE\",\"complexType\":\"RANGE\",\"defaultSelection\":{\"range\":{\"dataType\":\"DATE\",\"min\":{\"dynamicDateValue\":\"TODAY - 30\"},\"max\":{\"dynamicDateValue\":\"TODAY\"}}}}]},{\"name\":\"daily_trends\",\"displayName\":\"Daily Volume Trends by Status\",\"queryLines\":[\"SELECT\",\"    DATE(iv.inserted_at) AS scan_date,\",\"    iv.status,\",\"    COUNT(*) AS scan_count\",\"FROM rds.pg_rds_public.id_verifications iv\",\"WHERE iv.results_provided_at IS NOT NULL\",\"    AND iv.inserted_at BETWEEN :date_range.min AND :date_range.max\",\"GROUP BY DATE(iv.inserted_at), iv.status\",\"ORDER BY scan_date ASC\"],\"parameters\":[{\"displayName\":\"Date Range\",\"keyword\":\"date_range\",\"dataType\":\"DATE\",\"complexType\":\"RANGE\",\"defaultSelection\":{\"range\":{\"dataType\":\"DATE\",\"min\":{\"dynamicDateValue\":\"TODAY - 30\"},\"max\":{\"dynamicDateValue\":\"TODAY\"}}}}]},{\"name\":\"status_distribution\",\"displayName\":\"Pass/Fail/Review Distribution\",\"queryLines\":[\"SELECT\",\"    iv.status,\",\"    COUNT(*) AS count,\",\"    ROUND(COUNT(*) * 100.0 / SUM(COUNT(*)) OVER (), 2) AS percentage\",\"FROM rds.pg_rds_public.id_verifications iv\",\"WHERE iv.results_provided_at IS NOT NULL\",\"    AND iv.inserted_at BETWEEN :date_range.min AND :date_range.max\",\"GROUP BY iv.status\",\"ORDER BY count DESC\"],\"parameters\":[{\"displayName\":\"Date Range\",\"keyword\":\"date_range\",\"dataType\":\"DATE\",\"complexType\":\"RANGE\",\"defaultSelection\":{\"range\":{\"dataType\":\"DATE\",\"min\":{\"dynamicDateValue\":\"TODAY - 30\"},\"max\":{\"dynamicDateValue\":\"TODAY\"}}}}]},{\"name\":\"failure_reasons\",\"displayName\":\"Top Failure Reasons\",\"queryLines\":[\"SELECT\",\"    iv.score_reason AS failure_reason,\",\"    COUNT(*) AS failure_count,\",\"    ROUND(COUNT(*) * 100.0 / SUM(COUNT(*)) OVER (), 2) AS percentage_of_failures\",\"FROM rds.pg_rds_public.id_verifications iv\",\"WHERE iv.results_provided_at IS NOT NULL\",\"    AND iv.status = 'FAIL'\",\"    AND iv.inserted_at BETWEEN :date_range.min AND :date_range.max\",\"GROUP BY iv.score_reason\",\"ORDER BY failure_count DESC\",\"LIMIT 10\"],\"parameters\":[{\"displayName\":\"Date Range\",\"keyword\":\"date_range\",\"dataType\":\"DATE\",\"complexType\":\"RANGE\",\"defaultSelection\":{\"range\":{\"dataType\":\"DATE\",\"min\":{\"dynamicDateValue\":\"TODAY - 30\"},\"max\":{\"dynamicDateValue\":\"TODAY\"}}}}]},{\"name\":\"recent_submissions\",\"displayName\":\"Recent Submissions Detail\",\"queryLines\":[\"SELECT\",\"    iv.inserted_at AS scan_date,\",\"    c.name AS company_name,\",\"    p.name AS property_name,\",\"    p.state AS property_state,\",\"    iv.status,\",\"    iv.score_reason,\",\"    iv.provider AS idv_provider\",\"FROM rds.pg_rds_public.id_verifications iv\",\"JOIN rds.pg_rds_public.properties p ON iv.property_id = p.id\",\"JOIN rds.pg_rds_public.companies c ON p.company_id = c.id\",\"WHERE iv.results_provided_at IS NOT NULL\",\"    AND iv.inserted_at BETWEEN :date_range.min AND :date_range.max\",\"ORDER BY iv.inserted_at DESC\",\"LIMIT 100\"],\"parameters\":[{\"displayName\":\"Date Range\",\"keyword\":\"date_range\",\"dataType\":\"DATE\",\"complexType\":\"RANGE\",\"defaultSelection\":{\"range\":{\"dataType\":\"DATE\",\"min\":{\"dynamicDateValue\":\"TODAY - 30\"},\"max\":{\"dynamicDateValue\":\"TODAY\"}}}}]},{\"name\":\"weekly_trends\",\"displayName\":\"Weekly Performance Summary\",\"queryLines\":[\"SELECT\",\"    DATE_TRUNC('week', iv.inserted_at) AS week_start,\",\"    COUNT(*) AS total_scans,\",\"    SUM(CASE WHEN iv.status = 'PASS' THEN 1 ELSE 0 END) AS passed,\",\"    ROUND(SUM(CASE WHEN iv.status = 'PASS' THEN 1 ELSE 0 END) * 100.0 / COUNT(*), 2) AS pass_rate\",\"FROM rds.pg_rds_public.id_verifications iv\",\"WHERE iv.results_provided_at IS NOT NULL\",\"    AND iv.inserted_at BETWEEN :date_range.min AND :date_range.max\",\"GROUP BY DATE_TRUNC('week', iv.inserted_at)\",\"ORDER BY week_start ASC\"],\"parameters\":[{\"displayName\":\"Date Range\",\"keyword\":\"date_range\",\"dataType\":\"DATE\",\"complexType\":\"RANGE\",\"defaultSelection\":{\"range\":{\"dataType\":\"DATE\",\"min\":{\"dynamicDateValue\":\"TODAY - 90\"},\"max\":{\"dynamicDateValue\":\"TODAY\"}}}}]}],\"pages\":[{\"name\":\"main_page\",\"displayName\":\"Sales IDV Results\",\"layout\":[{\"widget\":{\"name\":\"total_scans_counter\",\"queries\":[{\"name\":\"main_query\",\"query\":{\"datasetName\":\"executive_summary\",\"fields\":[{\"name\":\"total_idv_scans\",\"expression\":\"`total_idv_scans`\"}],\"disaggregated\":true}}],\"spec\":{\"version\":2,\"widgetType\":\"counter\",\"encodings\":{\"value\":{\"fieldName\":\"total_idv_scans\",\"displayName\":\"Total IDV Scans\"}},\"frame\":{\"showTitle\":true,\"title\":\"Total IDV Scans\"}}},\"position\":{\"x\":0,\"y\":0,\"width\":2,\"height\":3}},{\"widget\":{\"name\":\"pass_rate_counter\",\"queries\":[{\"name\":\"main_query\",\"query\":{\"datasetName\":\"executive_summary\",\"fields\":[{\"name\":\"pass_rate_percentage\",\"expression\":\"`pass_rate_percentage`\"}],\"disaggregated\":true}}],\"spec\":{\"version\":2,\"widgetType\":\"counter\",\"encodings\":{\"value\":{\"fieldName\":\"pass_rate_percentage\",\"displayName\":\"Pass Rate %\"}},\"frame\":{\"showTitle\":true,\"title\":\"Pass Rate %\"}}},\"position\":{\"x\":2,\"y\":0,\"width\":2,\"height\":3}},{\"widget\":{\"name\":\"active_properties_counter\",\"queries\":[{\"name\":\"main_query\",\"query\":{\"datasetName\":\"executive_summary\",\"fields\":[{\"name\":\"active_properties\",\"expression\":\"`active_properties`\"}],\"disaggregated\":true}}],\"spec\":{\"version\":2,\"widgetType\":\"counter\",\"encodings\":{\"value\":{\"fieldName\":\"active_properties\",\"displayName\":\"Active Properties\"}},\"frame\":{\"showTitle\":true,\"title\":\"Active Properties\"}}},\"position\":{\"x\":4,\"y\":0,\"width\":2,\"height\":3}},{\"widget\":{\"name\":\"daily_trends_chart\",\"queries\":[{\"name\":\"main_query\",\"query\":{\"datasetName\":\"daily_trends\",\"fields\":[{\"name\":\"scan_date\",\"expression\":\"`scan_date`\"},{\"name\":\"status\",\"expression\":\"`status`\"},{\"name\":\"scan_count\",\"expression\":\"`scan_count`\"}],\"disaggregated\":true}}],\"spec\":{\"version\":3,\"widgetType\":\"bar\",\"encodings\":{\"x\":{\"fieldName\":\"scan_date\",\"scale\":{\"type\":\"temporal\"},\"displayName\":\"Date\"},\"y\":{\"fieldName\":\"scan_count\",\"scale\":{\"type\":\"quantitative\"},\"displayName\":\"Number of Scans\"},\"color\":{\"fieldName\":\"status\",\"scale\":{\"type\":\"categorical\",\"mappings\":[{\"value\":\"PASS\",\"color\":\"#00A972\"},{\"value\":\"FAIL\",\"color\":\"#FF3621\"},{\"value\":\"NEEDS REVIEW\",\"color\":\"#919191\"}]},\"displayName\":\"Status\"}},\"frame\":{\"showTitle\":true,\"title\":\"Daily IDV Volume by Status\"}}},\"position\":{\"x\":0,\"y\":3,\"width\":3,\"height\":6}},{\"widget\":{\"name\":\"status_distribution_pie\",\"queries\":[{\"name\":\"main_query\",\"query\":{\"datasetName\":\"status_distribution\",\"fields\":[{\"name\":\"status\",\"expression\":\"`status`\"},{\"name\":\"count\",\"expression\":\"`count`\"}],\"disaggregated\":true}}],\"spec\":{\"version\":3,\"widgetType\":\"pie\",\"encodings\":{\"angle\":{\"fieldName\":\"count\",\"scale\":{\"type\":\"quantitative\"},\"displayName\":\"Count\"},\"color\":{\"fieldName\":\"status\",\"scale\":{\"type\":\"categorical\",\"mappings\":[{\"value\":\"PASS\",\"color\":\"#00A972\"},{\"value\":\"FAIL\",\"color\":\"#FF3621\"},{\"value\":\"NEEDS REVIEW\",\"color\":\"#919191\"}]},\"displayName\":\"Status\"},\"label\":{\"show\":true}},\"frame\":{\"showTitle\":true,\"title\":\"Status Distribution\"}}},\"position\":{\"x\":3,\"y\":3,\"width\":3,\"height\":6}},{\"widget\":{\"name\":\"failure_reasons_chart\",\"queries\":[{\"name\":\"main_query\",\"query\":{\"datasetName\":\"failure_reasons\",\"fields\":[{\"name\":\"failure_reason\",\"expression\":\"`failure_reason`\"},{\"name\":\"failure_count\",\"expression\":\"`failure_count`\"}],\"disaggregated\":true}}],\"spec\":{\"version\":3,\"widgetType\":\"bar\",\"encodings\":{\"x\":{\"fieldName\":\"failure_count\",\"scale\":{\"type\":\"quantitative\"},\"displayName\":\"Count\"},\"y\":{\"fieldName\":\"failure_reason\",\"scale\":{\"type\":\"categorical\"},\"displayName\":\"Failure Reason\"}},\"frame\":{\"showTitle\":true,\"title\":\"Top Failure Reasons\"}}},\"position\":{\"x\":0,\"y\":9,\"width\":3,\"height\":6}},{\"widget\":{\"name\":\"weekly_trends_chart\",\"queries\":[{\"name\":\"main_query\",\"query\":{\"datasetName\":\"weekly_trends\",\"fields\":[{\"name\":\"week_start\",\"expression\":\"`week_start`\"},{\"name\":\"pass_rate\",\"expression\":\"`pass_rate`\"}],\"disaggregated\":true}}],\"spec\":{\"version\":3,\"widgetType\":\"line\",\"encodings\":{\"x\":{\"fieldName\":\"week_start\",\"scale\":{\"type\":\"temporal\"},\"displayName\":\"Week\"},\"y\":{\"fieldName\":\"pass_rate\",\"scale\":{\"type\":\"quantitative\"},\"displayName\":\"Pass Rate %\"}},\"frame\":{\"showTitle\":true,\"title\":\"Weekly Pass Rate Trend\"}}},\"position\":{\"x\":3,\"y\":9,\"width\":3,\"height\":6}},{\"widget\":{\"name\":\"company_performance_table\",\"queries\":[{\"name\":\"main_query\",\"query\":{\"datasetName\":\"company_overview\",\"fields\":[{\"name\":\"company_name\",\"expression\":\"`company_name`\"},{\"name\":\"num_properties\",\"expression\":\"`num_properties`\"},{\"name\":\"total_scans\",\"expression\":\"`total_scans`\"},{\"name\":\"passed\",\"expression\":\"`passed`\"},{\"name\":\"failed\",\"expression\":\"`failed`\"},{\"name\":\"pass_rate\",\"expression\":\"`pass_rate`\"}],\"disaggregated\":true}}],\"spec\":{\"version\":1,\"widgetType\":\"table\",\"encodings\":{\"columns\":[{\"fieldName\":\"company_name\",\"type\":\"string\",\"displayAs\":\"string\",\"visible\":true,\"title\":\"Company\",\"displayName\":\"Company\"},{\"fieldName\":\"num_properties\",\"type\":\"integer\",\"displayAs\":\"number\",\"visible\":true,\"title\":\"Properties\",\"displayName\":\"Properties\"},{\"fieldName\":\"total_scans\",\"type\":\"integer\",\"displayAs\":\"number\",\"visible\":true,\"title\":\"Total Scans\",\"displayName\":\"Total Scans\"},{\"fieldName\":\"passed\",\"type\":\"integer\",\"displayAs\":\"number\",\"visible\":true,\"title\":\"Passed\",\"displayName\":\"Passed\"},{\"fieldName\":\"failed\",\"type\":\"integer\",\"displayAs\":\"number\",\"visible\":true,\"title\":\"Failed\",\"displayName\":\"Failed\"},{\"fieldName\":\"pass_rate\",\"type\":\"float\",\"displayAs\":\"number\",\"numberFormat\":\"0.0\",\"visible\":true,\"title\":\"Pass Rate %\",\"displayName\":\"Pass Rate %\"}]},\"frame\":{\"showTitle\":true,\"title\":\"Company Performance Overview\"}}},\"position\":{\"x\":0,\"y\":15,\"width\":6,\"height\":6}},{\"widget\":{\"name\":\"property_performance_table\",\"queries\":[{\"name\":\"main_query\",\"query\":{\"datasetName\":\"property_performance\",\"fields\":[{\"name\":\"property_name\",\"expression\":\"`property_name`\"},{\"name\":\"company_name\",\"expression\":\"`company_name`\"},{\"name\":\"property_state\",\"expression\":\"`property_state`\"},{\"name\":\"total_scans\",\"expression\":\"`total_scans`\"},{\"name\":\"passed\",\"expression\":\"`passed`\"},{\"name\":\"failed\",\"expression\":\"`failed`\"},{\"name\":\"pass_rate\",\"expression\":\"`pass_rate`\"}],\"disaggregated\":true}}],\"spec\":{\"version\":1,\"widgetType\":\"table\",\"encodings\":{\"columns\":[{\"fieldName\":\"property_name\",\"type\":\"string\",\"displayAs\":\"string\",\"visible\":true,\"title\":\"Property\",\"displayName\":\"Property\"},{\"fieldName\":\"company_name\",\"type\":\"string\",\"displayAs\":\"string\",\"visible\":true,\"title\":\"Company\",\"displayName\":\"Company\"},{\"fieldName\":\"property_state\",\"type\":\"string\",\"displayAs\":\"string\",\"visible\":true,\"title\":\"State\",\"displayName\":\"State\"},{\"fieldName\":\"total_scans\",\"type\":\"integer\",\"displayAs\":\"number\",\"visible\":true,\"title\":\"Total\",\"displayName\":\"Total\"},{\"fieldName\":\"passed\",\"type\":\"integer\",\"displayAs\":\"number\",\"visible\":true,\"title\":\"Passed\",\"displayName\":\"Passed\"},{\"fieldName\":\"failed\",\"type\":\"integer\",\"displayAs\":\"number\",\"visible\":true,\"title\":\"Failed\",\"displayName\":\"Failed\"},{\"fieldName\":\"pass_rate\",\"type\":\"float\",\"displayAs\":\"number\",\"numberFormat\":\"0.0\",\"visible\":true,\"title\":\"Pass Rate %\",\"displayName\":\"Pass Rate %\"}]},\"frame\":{\"showTitle\":true,\"title\":\"Property-Level Performance\"}}},\"position\":{\"x\":0,\"y\":21,\"width\":6,\"height\":8}},{\"widget\":{\"name\":\"recent_submissions_table\",\"queries\":[{\"name\":\"main_query\",\"query\":{\"datasetName\":\"recent_submissions\",\"fields\":[{\"name\":\"scan_date\",\"expression\":\"`scan_date`\"},{\"name\":\"company_name\",\"expression\":\"`company_name`\"},{\"name\":\"property_name\",\"expression\":\"`property_name`\"},{\"name\":\"property_state\",\"expression\":\"`property_state`\"},{\"name\":\"status\",\"expression\":\"`status`\"},{\"name\":\"score_reason\",\"expression\":\"`score_reason`\"},{\"name\":\"idv_provider\",\"expression\":\"`idv_provider`\"}],\"disaggregated\":true}}],\"spec\":{\"version\":1,\"widgetType\":\"table\",\"encodings\":{\"columns\":[{\"fieldName\":\"scan_date\",\"type\":\"datetime\",\"displayAs\":\"datetime\",\"dateTimeFormat\":\"YYYY-MM-DD HH:mm\",\"visible\":true,\"title\":\"Date\",\"displayName\":\"Date\"},{\"fieldName\":\"company_name\",\"type\":\"string\",\"displayAs\":\"string\",\"visible\":true,\"title\":\"Company\",\"displayName\":\"Company\"},{\"fieldName\":\"property_name\",\"type\":\"string\",\"displayAs\":\"string\",\"visible\":true,\"title\":\"Property\",\"displayName\":\"Property\"},{\"fieldName\":\"property_state\",\"type\":\"string\",\"displayAs\":\"string\",\"visible\":true,\"title\":\"State\",\"displayName\":\"State\"},{\"fieldName\":\"status\",\"type\":\"string\",\"displayAs\":\"string\",\"visible\":true,\"title\":\"Status\",\"displayName\":\"Status\"},{\"fieldName\":\"score_reason\",\"type\":\"string\",\"displayAs\":\"string\",\"visible\":true,\"title\":\"Reason\",\"displayName\":\"Reason\"},{\"fieldName\":\"idv_provider\",\"type\":\"string\",\"displayAs\":\"string\",\"visible\":true,\"title\":\"Provider\",\"displayName\":\"Provider\"}]},\"itemsPerPage\":25,\"frame\":{\"showTitle\":true,\"title\":\"Recent Submissions (Last 100)\"}}},\"position\":{\"x\":0,\"y\":29,\"width\":6,\"height\":8}}]}]}"
}
